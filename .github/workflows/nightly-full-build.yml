name: Nightly Build

on:
  schedule:
    - cron: '0 6 * * *'
  workflow_dispatch:

permissions:
  contents: read

jobs:
  build-all:
    name: Full build with diagnostics
    uses: ./.github/workflows/build-matrix.yml
    with:
      verbose_diagnostics: true
      upload_artifacts: true

  summary:
    name: Nightly build summary
    runs-on: ubuntu-latest
    needs: build-all
    if: always()
    steps:
      - name: Print summary
        run: |
          echo "ğŸŒ™ Nightly Build Complete"
          echo "ğŸ“¦ Build result: ${{ needs.build-all.result }}"
          echo "ğŸ“Š Artifacts available with verbose diagnostics"
          echo "â±ï¸ Retention: 14 days"
