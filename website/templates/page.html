{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock title %}
{% block description %}{{ page.description | default(value=config.description) }}{% endblock description %}

{% block content %}
<div class="relative z-10">
  {% include "partials/header.html" %}

  <div class="max-w-screen-2xl mx-auto px-6 py-8 grid lg:grid-cols-12 gap-6 xl:gap-8">
    {% set doc_root = page.ancestors | first | default(value="docs/_index.md") %}
    {% set doc_home = get_section(path=doc_root) %}
    {% set doc_home_label = doc_home.title | default(value="Docs") %}
    {% set current_path = current_path %}
    {% set doc_home_url = doc_home.permalink %}
    {% include "partials/sidebar.html" %}

    <!-- Table of Contents (Right Sidebar) -->
    {% include "partials/toc.html" %}

    <!-- Main Content -->
    <main class="lg:col-span-9 xl:col-span-7">
      <article class="bg-slate-900/20 border border-slate-800 rounded-lg p-8 lg:p-12">
        <!-- Breadcrumbs and Reading Time -->
        <div class="flex items-center justify-between text-sm text-slate-500 mb-6">
          <div>
            <a href="{{ config.base_url }}/" class="hover:text-orange-500 transition-colors">Home</a>
            <span class="mx-2">/</span>
            <a href="{{ get_url(path='/docs/') }}" class="hover:text-orange-500 transition-colors">Docs</a>
            {% if page.ancestors %}
              {% for ancestor in page.ancestors %}
                {% set section = get_section(path=ancestor) %}
                <span class="mx-2">/</span>
                <a href="{{ section.permalink }}" class="hover:text-orange-500 transition-colors">{{ section.title }}</a>
              {% endfor %}
            {% endif %}
            <span class="mx-2">/</span>
            <span class="text-white">{{ page.title }}</span>
          </div>
          <!-- Reading time estimate -->
          <div class="text-xs text-slate-600 whitespace-nowrap">
            {% set word_count = page.content | striptags | split(pat=" ") | length %}
            {% set reading_time = (word_count / 200) | round %}
            {% if reading_time < 1 %}
              &lt; 1 min
            {% else %}
              {{ reading_time }} min read
            {% endif %}
          </div>
        </div>

        <!-- Content -->
        <div class="prose max-w-none overflow-hidden">
          {{ page.content | safe }}
        </div>

        <!-- Footer Navigation -->
        {% if page.earlier or page.later %}
        <div class="mt-12 pt-8 border-t border-slate-800 flex justify-between">
          {% if page.earlier %}
          <a href="{{ page.earlier.permalink }}" class="text-orange-500 hover:text-orange-400 transition-colors">
            ← {{ page.earlier.title }}
          </a>
          {% else %}
          <div></div>
          {% endif %}

          {% if page.later %}
          <a href="{{ page.later.permalink }}" class="text-orange-500 hover:text-orange-400 transition-colors">
            {{ page.later.title }} →
          </a>
          {% endif %}
        </div>
        {% endif %}
      </article>

      {% include "partials/next-steps.html" %}
    </main>
  </div>

  {% include "partials/footer.html" %}
</div>
{% endblock content %}
