{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock title %}
{% block description %}{{ page.description | default(value=config.description) }}{% endblock description %}

{% block content %}
<div class="relative z-10">
  {% include "partials/header.html" %}

  <div class="max-w-screen-2xl mx-auto px-6 py-8 grid lg:grid-cols-12 gap-6 xl:gap-8">
    {% set doc_root = page.ancestors | first | default(value="docs/_index.md") %}
    {% set doc_home = get_section(path=doc_root) %}
    {% set doc_home_label = doc_home.title | default(value="Docs") %}
    {% set current_path = current_path %}
    {% set doc_home_url = doc_home.permalink %}
    {% include "partials/sidebar.html" %}

    <!-- Table of Contents (Right Sidebar) -->
    {% include "partials/toc.html" %}

    <!-- Main Content -->
    <main class="col-span-12 lg:col-span-9 xl:col-span-7">
      <article style="background: color-mix(in srgb, var(--c2) 20%, transparent); border: 1px solid var(--c3); border-radius: 0.5rem; padding: 2rem;" class="lg:p-12">
        <!-- Breadcrumbs and Reading Time -->
        <div style="display: flex; align-items: center; justify-content: space-between; font-size: 0.875rem; color: var(--c4); margin-bottom: 1.5rem;">
          <div>
            <a href="{{ config.base_url }}/" style="color: var(--c4); text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='var(--a1)'" onmouseout="this.style.color='var(--c4)'">Home</a>
            <span style="margin: 0 0.5rem;">/</span>
            <a href="{{ get_url(path='/docs/') }}" style="color: var(--c4); text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='var(--a1)'" onmouseout="this.style.color='var(--c4)'">Docs</a>
            {% if page.ancestors %}
              {% for ancestor in page.ancestors %}
                {% set section = get_section(path=ancestor) %}
                <span style="margin: 0 0.5rem;">/</span>
                <a href="{{ section.permalink }}" style="color: var(--c4); text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='var(--a1)'" onmouseout="this.style.color='var(--c4)'">{{ section.title }}</a>
              {% endfor %}
            {% endif %}
            <span style="margin: 0 0.5rem;">/</span>
            <span style="color: var(--f2);">{{ page.title }}</span>
          </div>
          <!-- Reading time estimate -->
          <div style="font-size: 0.75rem; color: var(--c4); white-space: nowrap;">
            {% set word_count = page.content | striptags | split(pat=" ") | length %}
            {% set reading_time = (word_count / 200) | round %}
            {% if reading_time < 1 %}
              &lt; 1 min
            {% else %}
              {{ reading_time }} min read
            {% endif %}
          </div>
        </div>

        <!-- Content -->
        <div class="prose max-w-none overflow-hidden">
          {{ page.content | safe }}
        </div>

        <!-- Footer Navigation -->
        {% if page.earlier or page.later %}
        <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--c3); display: flex; justify-content: space-between;">
          {% if page.earlier %}
          <a href="{{ page.earlier.permalink }}" style="color: var(--a1); text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='var(--a1-hover)'" onmouseout="this.style.color='var(--a1)'">
            ← {{ page.earlier.title }}
          </a>
          {% else %}
          <div></div>
          {% endif %}

          {% if page.later %}
          <a href="{{ page.later.permalink }}" style="color: var(--a1); text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='var(--a1-hover)'" onmouseout="this.style.color='var(--a1)'">
            {{ page.later.title }} →
          </a>
          {% endif %}
        </div>
        {% endif %}
      </article>

      {% include "partials/next-steps.html" %}
    </main>
  </div>

  {% include "partials/footer.html" %}
</div>
{% endblock content %}
