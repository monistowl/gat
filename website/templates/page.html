{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock title %}
{% block description %}{{ page.description | default(value=config.description) }}{% endblock description %}

{% block content %}
<div class="relative z-10">
  <!-- Navigation Bar -->
  <nav class="border-b border-slate-800 bg-slate-950/80 backdrop-blur-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
      <div class="flex items-center gap-8">
        <a href="{{ config.base_url }}/" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
          <div class="w-8 h-8 bg-orange-600 rounded flex items-center justify-center font-bold text-white font-mono">
            G
          </div>
          <span class="font-bold text-xl tracking-tight">GAT</span>
        </a>
        <a href="{{ config.base_url }}/docs/" class="text-sm text-slate-400 hover:text-orange-500 transition-colors">
          Documentation
        </a>
      </div>
      <a href="{{ config.extra.repo_url }}" class="text-sm text-slate-400 hover:text-white transition-colors">
        GitHub
      </a>
    </div>
  </nav>

  <div class="max-w-7xl mx-auto px-6 py-8 grid lg:grid-cols-12 gap-8">
    <!-- Sidebar Navigation -->
    <aside class="lg:col-span-3 lg:sticky lg:top-24 h-fit">
      <div class="bg-slate-900/40 border border-slate-800 rounded-lg p-6">
        <h3 class="text-sm font-bold text-orange-500 uppercase tracking-wider mb-4">Navigation</h3>
        <nav class="space-y-2">
          <a href="{{ config.base_url }}/docs/" class="block text-slate-400 hover:text-white transition-colors py-1">
            ← Back to Docs
          </a>
          <div class="border-t border-slate-800 my-4"></div>

          <!-- Guide Section -->
          <div class="mb-4">
            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">Analysis</div>
            <a href="{{ config.base_url }}/docs/guide/pf/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Power Flow</a>
            <a href="{{ config.base_url }}/docs/guide/opf/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Optimal Power Flow</a>
            <a href="{{ config.base_url }}/docs/guide/ts/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Time Series</a>
            <a href="{{ config.base_url }}/docs/guide/se/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">State Estimation</a>
            <a href="{{ config.base_url }}/docs/guide/analytics/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Reliability</a>
            <a href="{{ config.base_url }}/docs/guide/graph/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Graph Analysis</a>
          </div>

          <div class="mb-4">
            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">Domain</div>
            <a href="{{ config.base_url }}/docs/guide/adms/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">ADMS</a>
            <a href="{{ config.base_url }}/docs/guide/derms/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">DERMS</a>
            <a href="{{ config.base_url }}/docs/guide/dist/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Distribution</a>
          </div>

          <div class="mb-4">
            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">Integration</div>
            <a href="{{ config.base_url }}/docs/guide/mcp-onboarding/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">MCP Server</a>
            <a href="{{ config.base_url }}/docs/guide/datasets/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Datasets</a>
            <a href="{{ config.base_url }}/docs/guide/ci-cd/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">CI/CD</a>
            <a href="{{ config.base_url }}/docs/guide/feature-matrix/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Features</a>
          </div>

          <div class="mb-4">
            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">Reference</div>
            <a href="{{ config.base_url }}/docs/guide/cli-architecture/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">CLI Architecture</a>
            <a href="{{ config.base_url }}/docs/guide/gat-tui/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">TUI Reference</a>
            <a href="{{ config.base_url }}/docs/guide/scaling/" class="block text-sm text-slate-400 hover:text-orange-500 transition-colors py-1">Scaling</a>
          </div>
        </nav>

        <div class="border-t border-slate-800 mt-6 pt-6">
          <a href="{{ config.extra.repo_url }}/tree/main/docs"
             class="block text-xs text-slate-500 hover:text-orange-500 transition-colors">
            View on GitHub →
          </a>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="lg:col-span-9">
      <article class="bg-slate-900/20 border border-slate-800 rounded-lg p-8 lg:p-12">
        <!-- Breadcrumbs -->
        <div class="text-sm text-slate-500 mb-6">
          <a href="{{ config.base_url }}/" class="hover:text-orange-500 transition-colors">Home</a>
          <span class="mx-2">/</span>
          <a href="{{ config.base_url }}/docs/" class="hover:text-orange-500 transition-colors">Docs</a>
          {% if page.ancestors %}
            {% for ancestor in page.ancestors %}
              {% set section = get_section(path=ancestor) %}
              <span class="mx-2">/</span>
              <a href="{{ section.permalink }}" class="hover:text-orange-500 transition-colors">{{ section.title }}</a>
            {% endfor %}
          {% endif %}
          <span class="mx-2">/</span>
          <span class="text-white">{{ page.title }}</span>
        </div>

        <!-- Content -->
        <div class="prose max-w-none">
          {{ page.content | safe }}
        </div>

        <!-- Footer Navigation -->
        {% if page.earlier or page.later %}
        <div class="mt-12 pt-8 border-t border-slate-800 flex justify-between">
          {% if page.earlier %}
          <a href="{{ page.earlier.permalink }}" class="text-orange-500 hover:text-orange-400 transition-colors">
            ← {{ page.earlier.title }}
          </a>
          {% else %}
          <div></div>
          {% endif %}

          {% if page.later %}
          <a href="{{ page.later.permalink }}" class="text-orange-500 hover:text-orange-400 transition-colors">
            {{ page.later.title }} →
          </a>
          {% endif %}
        </div>
        {% endif %}
      </article>
    </main>
  </div>
</div>
{% endblock content %}
